{"version":3,"file":"ng-mentions.mjs","sources":["../../src/util/utils.ts","../../src/highlighter-pattern.directive.ts","../../src/highlighted-value.ts","../../src/highlighter.component.ts","../../src/util/key.ts","../../src/util/mentions-list.component.ts","../../src/util/highlight.directive.ts","../../src/mentions.component.ts","../../src/mentions-input.directive.ts","../../src/index.ts","../../src/ng-mentions.ts"],"sourcesContent":["export const styleProperties = Object.freeze([\n  'direction',  // RTL support\n  'boxSizing',\n  'width',  // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\n  'height', 'minHeight', 'minWidth', 'overflowX',\n  'overflowY',  // copy the scrollbar for IE\n\n  'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'borderStyle',\n\n  'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft',\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n  'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily',\n\n  'textAlign', 'textTransform', 'textIndent',\n  'textDecoration',  // might not make a difference, but better be safe\n\n  'letterSpacing', 'wordSpacing',\n\n  'tabSize', 'MozTabSize'\n]);\nconst isBrowser = typeof window !== 'undefined';\nconst isFirefox = isBrowser && (<any>window).mozInnerScreenX != null;\n\n// eslint-disable-next-line max-len\nconst mobileRegEx = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i;\n// eslint-disable-next-line max-len\nconst mobileRegEx2 = /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i;\nexport function isMobileOrTablet() {\n  const agent = navigator.userAgent || navigator.vendor || (window as any).opera;\n  return mobileRegEx.test(agent) || mobileRegEx2.test(agent.substr(0, 4));\n}\n\nfunction isInputOrTextAreaElement(element?: HTMLElement): boolean {\n  return element !== null &&\n      (element.nodeName.toUpperCase() === 'INPUT' || element.nodeName.toUpperCase() === 'TEXTAREA' || element.nodeName === '#text');\n}\n\nfunction spliceString(value: string, start: number, end: number, insert: string): string {\n  return value.substring(0, start) + insert + value.substring(end) + '';\n}\n\nfunction iterateMentionsMarkup(\n    value: string, mentionMarkup: MarkupMention, textIterator: (..._: any[]) => void,\n    markupIterator: (..._: any[]) => void, displayTransform: (..._: string[]) => string) {\n  let match; let start = 0;\n  let currentPlainTextIndex = 0;\n  const regEx = mentionMarkup.regEx;\n  regEx.lastIndex = 0;\n  while ((match = regEx.exec(value)) !== null) {\n    const display = displayTransform(...match);\n    const substr = value.substring(start, match.index);\n    textIterator(substr, start, currentPlainTextIndex);\n    currentPlainTextIndex += substr.length;\n    markupIterator(match[0], match.index, currentPlainTextIndex, display);\n    currentPlainTextIndex += display.length;\n    start = regEx.lastIndex;\n  }\n\n  if (start < value.length) {\n    textIterator(value.substring(start), start, currentPlainTextIndex);\n  }\n}\n\nfunction iterateOnlyMentionsMarkup(\n    value: string, mentionMarkup: MarkupMention, markupIterator: (..._: any[]) => boolean,\n    displayTransform: (..._: string[]) => string) {\n  let match; let start = 0; let currentPlainTextIndex = 0;\n  const regEx = mentionMarkup.regEx;\n  regEx.lastIndex = 0;\n  while ((match = regEx.exec(value)) !== null) {\n    const display = displayTransform(...match);\n    const substr = value.substring(start, match.index);\n    currentPlainTextIndex += substr.length;\n    markupIterator(match[0], match.index, currentPlainTextIndex, display);\n    currentPlainTextIndex += display.length;\n    start = regEx.lastIndex;\n  }\n}\n\nexport function mapPlainTextIndex(\n    value: string, mentionMarkup: MarkupMention, indexInPlainText: number, toEndOfMarkup: boolean,\n    displayTransform: (..._: string[]) => string): number {\n  if (isNaN(indexInPlainText)) {\n    return indexInPlainText;\n  }\n\n  let result;\n  const textIterator = (matchString: string, index: number, substringPlainTextIndex: number) => {\n    if (typeof result !== 'undefined') {\n      return;\n    }\n    if (substringPlainTextIndex + matchString.length >= indexInPlainText) {\n      result = index + indexInPlainText - substringPlainTextIndex;\n    }\n  };\n  const markupIterator = (matchString: string, index: number, mentionPlainTextIndex: number, display: string) => {\n    if (typeof result !== 'undefined') {\n      return;\n    }\n\n    if (mentionPlainTextIndex + display.length > indexInPlainText) {\n      result = index + (toEndOfMarkup ? matchString.length : 0);\n    }\n  };\n\n  iterateMentionsMarkup(value, mentionMarkup, textIterator, markupIterator, displayTransform);\n\n  return typeof result !== 'undefined' ? result : value.length;\n}\n\nexport function getCaretPosition(element: HTMLInputElement): number {\n  if (isInputOrTextAreaElement(element)) {\n    const value = element.value;\n    return value.slice(0, element.selectionStart).length - (isMobileOrTablet() ? 1 : 0);\n  }\n\n  const selection = window.getSelection();\n  if (selection.rangeCount > 0) {\n    const range = selection.getRangeAt(0);\n    return range.startOffset;\n  }\n\n  return 0;\n}\n\nexport function getCaretCoordinates(element: HTMLTextAreaElement, position: number): {top: number, left: number} {\n  let coords = {top: 0, left: 0};\n  if (!isBrowser) {\n    return coords;\n  }\n  const div = document.createElement('div');\n  document.body.appendChild(div);\n  const style = div.style;\n  const computed = getElementStyle(element);\n  style.whiteSpace = 'pre-wrap';\n  if (element.nodeName !== 'INPUT') {\n    style.wordWrap = 'break-word';\n  }\n  style.position = 'absolute';\n  style.visibility = 'hidden';\n  styleProperties.forEach(prop => style[prop] = computed[prop]);\n  if (isFirefox) {\n    if (element.scrollHeight > parseInt(computed.height, 10)) {\n      style.overflowY = 'scroll';\n    }\n  } else {\n    style.overflow = 'hidden';\n  }\n  div.textContent = element.value.substring(0, position);\n  if (element.nodeName === 'INPUT') {\n    div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n  }\n\n  const span = document.createElement('span');\n  span.textContent = element.value.substring(position) || '.';\n  div.appendChild(span);\n  let scrollTop = 0;\n  if (element.scrollTop > 0) {\n    scrollTop = element.scrollTop;\n  }\n\n  coords = {\n    top: span.offsetTop + parseInt(computed['borderTopWidth'], 10) - scrollTop,\n    left: span.offsetLeft + parseInt(computed['borderLeftWidth'], 10)\n  };\n\n  document.body.removeChild(div);\n\n  return coords;\n}\n\nexport function getElementStyle(element: HTMLElement, property?: string): any {\n  const style = window.getComputedStyle ? getComputedStyle(element) : (<any>element).currentStyle;\n  if (property && typeof property === 'string' && typeof style[property] !== 'undefined') {\n    return style[property];\n  } else if (property && typeof property === 'string') {\n    return null;\n  }\n\n  return style;\n}\n\nexport function setCaretPosition(element: HTMLInputElement, position: number): void {\n  if (isInputOrTextAreaElement(element) && element.selectionStart !== undefined) {\n    element.focus();\n    element.setSelectionRange(position, position);\n    element.selectionStart = position;\n  } else {\n    const range = document.createRange();\n    range.setStart(element, position);\n    range.collapse(true);\n    const selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n}\n\nexport function escapeRegExp(str: string): string {\n  return str.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n}\n\nexport interface MarkupMention {\n  markup: string;\n  regEx: RegExp;\n  groups: {[key: string]: number};\n}\n\nexport function markupToRegExp(markup: string): MarkupMention {\n  const placeholderRegExp = /__([\\w]+)__/g;\n  const placeholderExclusion = '^\\\\)\\\\]';\n  let markupPattern = escapeRegExp(markup);\n  const placeholders = {};\n  let match; let i = 1;\n  do {\n    match = placeholderRegExp.exec(markupPattern);\n    if (match) {\n      const placeholder = match[1];\n      markupPattern = markupPattern.replace(`__${placeholder}__`, `([${placeholderExclusion}]+)`);\n      placeholders[placeholder] = ++i;\n    }\n  } while (match);\n\n  return {markup, regEx: new RegExp('(' + markupPattern + ')', 'ig'), groups: placeholders};\n}\n\nexport function getPlainText(\n    value: string, mentionMarkup: MarkupMention, displayTransform: (..._: string[]) => string) {\n  mentionMarkup.regEx.lastIndex = 0;\n  return value.replace(mentionMarkup.regEx, displayTransform);\n}\n\nexport function replacePlaceholders(item: any, markupMention: MarkupMention): string {\n  let result = markupMention.markup + '';\n  Object.keys(markupMention.groups)\n      .forEach(\n          key => result = result.replace(new RegExp(`__${key}__`, 'g'), typeof item === 'string' ? item : item[key]));\n\n  return result;\n}\n\nexport function applyChangeToValue(\n    value: string, markupMention: MarkupMention, plainTextValue: string, selectionStartBeforeChange: number = 0,\n    selectionEndBeforeChange: number = 0, selectionEndAfterChange: number = 0,\n    displayTransform: (..._: string[]) => string) {\n  const oldPlainTextValue = getPlainText(value, markupMention, displayTransform);\n  const lengthDelta = oldPlainTextValue.length - plainTextValue.length;\n\n  /** fix issue when first character changing **/\n/*  if (!selectionStartBeforeChange) {\n    selectionStartBeforeChange = selectionEndBeforeChange + lengthDelta;\n  }\n  if (!selectionEndBeforeChange) {\n    selectionEndBeforeChange = selectionStartBeforeChange;\n  }*/\n\n  if (selectionStartBeforeChange === selectionEndBeforeChange && selectionEndBeforeChange === selectionEndAfterChange &&\n      oldPlainTextValue.length === plainTextValue.length) {\n    selectionStartBeforeChange--;\n  }\n\n  const insert = plainTextValue.slice(selectionStartBeforeChange, selectionEndAfterChange);\n  const spliceStart = Math.min(selectionStartBeforeChange, selectionEndAfterChange);\n  let spliceEnd = selectionEndBeforeChange;\n  if (selectionStartBeforeChange === selectionEndAfterChange) {\n    spliceEnd = Math.max(selectionEndBeforeChange, selectionStartBeforeChange + lengthDelta);\n  }\n\n  return spliceString(\n      value, mapPlainTextIndex(value, markupMention, spliceStart, false, displayTransform),\n      mapPlainTextIndex(value, markupMention, spliceEnd, true, displayTransform), insert);\n}\n\nexport function findStartOfMentionInPlainText(\n    value: string, mentionMarkup: MarkupMention, indexInPlainText: number,\n    displayTransform: (..._: string[]) => string): {start: number, end: number} {\n  let result = {start: -1, end: -1};\n  const markupIterator =\n      (matchString: string, index: number, mentionPlainTextIndex: number, display: string): boolean => {\n        if (mentionPlainTextIndex < indexInPlainText && mentionPlainTextIndex + display.length > indexInPlainText) {\n          result = {start: mentionPlainTextIndex, end: mentionPlainTextIndex + display.length};\n          return true;\n        }\n\n        return false;\n      };\n  iterateOnlyMentionsMarkup(value, mentionMarkup, markupIterator, displayTransform);\n\n  return result;\n}\n\nexport function getBoundsOfMentionAtPosition(\n    value: string, mentionMarkup: MarkupMention, indexInPlainText: number,\n    displayTransform: (..._: string[]) => string): {start: number, end: number} {\n  return findStartOfMentionInPlainText(value, mentionMarkup, indexInPlainText, displayTransform);\n}\n\nexport function escapeHtml(text: string) {\n  return text.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\n\nexport function isCoordinateWithinRect(rect: ClientRect, x: number, y: number) {\n  return (rect.left < x && x < rect.right) && (rect.top < y && y < rect.bottom);\n}\n\nexport class Highlighted {\n  constructor(public readonly element: Element, public readonly type: string = null) {}\n\n  get clientRect(): ClientRect {\n    return this.element.getBoundingClientRect();\n  }\n}\n","import {Directive, Input, OnChanges, OnInit, SimpleChanges} from '@angular/core';\nimport {MarkupMention, markupToRegExp} from './util/utils';\n\n/**\n * The Highlighted Pattern Directive\n */\n@Directive({exportAs: 'ngHighlighterPattern', selector: 'ng-highlighter-pattern'})\nexport class NgHighlighterPatternDirective implements OnInit, OnChanges {\n  /**\n   * Optional. CSS Class that will be added to the highlighted element.\n   */\n  @Input() className: string;\n  /**\n   * The markup used to format a mention\n   */\n  @Input() markup: string;\n  /**\n   * This can either be the name of the item taken from part of the markup, or it\n   * can be a fully formed HTML markup with RegExp placers.\n   * Optionally, this can also be a custom function that can be used to format the matched text\n   * and returned to be displayed. No other transformation will be done to the text and no\n   * matching information is passed the to function, just the matched text.\n   */\n  @Input() markupReplace: string|((content: string) => string);\n\n  private markupMention: MarkupMention;\n\n  ngOnInit(): void {\n    if (this.markup) {\n      this.markupMention = markupToRegExp(this.markup);\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if ('markup' in changes) {\n      this.markupMention = markupToRegExp(this.markup);\n    }\n  }\n\n  match(value: string) {\n    return this.markupMention ? this.markupMention.regEx.exec(value) : null;\n  }\n\n  readonly format = (content: string) => {\n    if (typeof this.markupReplace === 'string') {\n      let result;\n      const replaceTries =\n          [this.markupReplace, `\\$${this.markupReplace}`, `\\$${this.markupMention.groups[this.markupReplace]}`];\n      for (const attempt of replaceTries) {\n        result = content.replace(this.markupMention.regEx, attempt);\n        if (result !== attempt) {\n          break;\n        }\n      }\n\n      return result;\n    } else if (typeof this.markupReplace === 'function') {\n      return this.markupReplace(content);\n    }\n\n    return content;\n  }\n}\n","/**\n * The Highlighted Value\n */\nexport class NgHighlightedValue {\n  /**\n   * Content of the highlighted item that was clicked\n   */\n  public readonly content: string;\n  /**\n   * The type (or class name) associated with the highlighted item that was clicked.\n   *\n   * @see NgHighlighterPatternDirective.className\n   */\n  public readonly type: string = null;\n  /**\n   * Optional. Arbitrary rel associated with the clicked highlighted element.\n   * This is determined by how the highlighted item's content is formatted.\n   */\n  public readonly rel: string = null;\n\n  constructor(content: string, type: string = null, rel: string = null) {\n    this.content = content;\n    this.type = type;\n    this.rel = rel;\n  }\n}\n","import {\n  AfterContentInit,\n  ChangeDetectorRef,\n  Component,\n  ContentChildren,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  OnChanges,\n  Output,\n  QueryList,\n  SimpleChanges,\n  ViewEncapsulation\n} from '@angular/core';\n\nimport {NgHighlightedValue} from './highlighted-value';\nimport {NgHighlighterPatternDirective} from './highlighter-pattern.directive';\nimport {Tag} from './util/interfaces';\nimport {escapeHtml, Highlighted, isCoordinateWithinRect} from './util/utils';\n\n/**\n * The Highlighter Component\n */\n@Component({\n  exportAs: 'ngHighlighter',\n  selector: 'ng-highlighter',\n  template: '<div *ngFor=\"let line of lines\" [innerHTML]=\"line\"></div>',\n  preserveWhitespaces: false,\n  encapsulation: ViewEncapsulation.None\n})\nexport class NgHighlighterComponent implements OnChanges, AfterContentInit {\n  /**\n   * Text value to be highlighted\n   */\n  @Input() text: string;\n  /**\n   * Event emitted when a highlighted item it clicked\n   */\n  @Output() itemClick: EventEmitter<NgHighlightedValue> = new EventEmitter<NgHighlightedValue>();\n\n  @ContentChildren(NgHighlighterPatternDirective) patterns: QueryList<NgHighlighterPatternDirective>;\n\n  readonly newLine: RegExp = /\\n/g;\n  lines: string[] = [];\n  private highlightedElements: Highlighted[] = [];\n\n  constructor(private element: ElementRef, private cdr: ChangeDetectorRef) {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if ('text' in changes) {\n      this.parseLines();\n    }\n  }\n\n  ngAfterContentInit(): void {\n    if (this.text && this.patterns) {\n      this.parseLines();\n    }\n  }\n\n  @HostListener('click', ['$event'])\n  onItemClick(event: MouseEvent) {\n    const matchedElement = this.getMatchedElement(event);\n    if (matchedElement) {\n      event.preventDefault();\n      event.stopPropagation();\n      const content = (<HTMLElement>matchedElement.element).innerText;\n      let rel = matchedElement.element.getAttribute('rel') || null;\n      const relElement = matchedElement.element.querySelector('[rel]');\n      if (relElement) {\n        rel = relElement.getAttribute('rel') || null;\n      }\n      this.itemClick.emit(new NgHighlightedValue(content, matchedElement.type, rel));\n    }\n  }\n\n  private parseLines() {\n    this.lines = this.text.split(this.newLine).map((line: string) => this.highlight(line));\n    this.cdr.detectChanges();\n    this.collectHighlightedItems();\n  }\n\n  private highlight(line: string) {\n    if (line.length === 0 || !this.patterns) {\n      return '&nbsp;';\n    }\n\n    const tags: Tag[] = [];\n    let match;\n    this.patterns.forEach((pattern: NgHighlighterPatternDirective) => {\n      while ((match = pattern.match(line)) !== null) {\n        tags.push({\n          type: pattern.className,\n          indices: {start: match.index, end: match.index + match[0].length},\n          formatter: pattern.format\n        });\n      }\n    });\n\n    const prevTags: Tag[] = [];\n    const parts: string[] = [];\n    [...tags].sort((tagA, tagB) => tagA.indices.start - tagB.indices.start).forEach((tag: Tag) => {\n      const expectedLength = tag.indices.end - tag.indices.start;\n      const contents = line.slice(tag.indices.start, tag.indices.end);\n      if (contents.length === expectedLength) {\n        const prevIndex = prevTags.length > 0 ? prevTags[prevTags.length - 1].indices.end : 0;\n        const before = line.slice(prevIndex, tag.indices.start);\n        parts.push(escapeHtml(before));\n        parts.push(`<span class=\"highlighted ${tag.type || ''}\" rel=\"${tag.type}\">${tag.formatter(contents)}</span>`);\n        prevTags.push(tag);\n      }\n    });\n\n    const remainingStart = prevTags.length > 0 ? prevTags[prevTags.length - 1].indices.end : 0;\n    const remaining = line.slice(remainingStart);\n    parts.push(escapeHtml(remaining));\n    parts.push('&nbsp;');\n\n    return parts.join('');\n  }\n\n  private getMatchedElement(event: MouseEvent): Highlighted {\n    const matched = this.highlightedElements.find(\n        (el: Highlighted): boolean => isCoordinateWithinRect(el.clientRect, event.clientX, event.clientY));\n\n    return matched ? matched : null;\n  }\n\n  private collectHighlightedItems() {\n    this.highlightedElements = Array.from((<Element>this.element.nativeElement).getElementsByClassName('highlighted'))\n                                   .map((element: HTMLElement) => {\n                                     const type = element.getAttribute('rel') || null;\n\n                                     return new Highlighted(element, type);\n                                   });\n  }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\n\n// eslint-disable-next-line no-shadow\nexport enum Key {\n  Backspace = 8,\n  Tab = 9,\n  Enter = 13,\n  Shift = 16,\n  Escape = 27,\n  Space = 32,\n  End = 35,\n  Home = 36,\n  ArrowLeft = 37,\n  ArrowUp = 38,\n  ArrowRight = 39,\n  ArrowDown = 40\n}\n","import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  OnInit,\n  TemplateRef,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {getCaretCoordinates, getElementStyle} from './utils';\n\n@Component({\n  selector: 'mentions-list',\n  template: `\n      <ng-template #defaultItemTemplate let-item=\"item\">\n          {{transformItem(item)}}\n      </ng-template>\n      <ul #list class=\"dropdown-menu scrollable-menu\">\n          <li *ngFor=\"let item of items; let i = index\" [class.active]=\"activeIndex === i\">\n              <a href class=\"dropdown-item\" (click)=\"onItemClick($event, i, item)\">\n                  <ng-template [ngTemplateOutlet]=\"itemTemplate\"\n                               [ngTemplateOutletContext]=\"{item:item,index:i}\"></ng-template>\n              </a>\n          </li>\n      </ul>\n  `,\n  styleUrls: ['./mentions-list.scss'],\n  styles: [\n    'mentions-list.show {display: block;} mentions-list.no-items {display: none;}',\n    'mentions-list .scrollable-menu {display: block;height: auto;max-height:300px;overflow:auto;}',\n    'mentions-list li.active {background: #f7f7f9;}'\n  ],\n  encapsulation: ViewEncapsulation.None\n})\nexport class NgMentionsListComponent implements OnInit {\n  public items: any[];\n  public itemTemplate: TemplateRef<any>;\n  public displayTransform: (..._: string[]) => string;\n  public textAreaElement: HTMLTextAreaElement;\n\n  activeIndex = -1;\n  readonly itemSelected: EventEmitter<any> = new EventEmitter<any>();\n\n  @ViewChild('defaultItemTemplate', {static: true}) defaultItemTemplate: TemplateRef<any>;\n  @ViewChild('list', {static: true}) list: ElementRef;\n  @HostBinding('class.show') public show = false;\n  @HostBinding('class.drop-up') public dropUp = false;\n\n  private _top = 0;\n  private _left = 0;\n\n  @HostBinding('style.top')\n  get top(): string {\n    return this._top + this.adjustTop + 'px';\n  }\n\n  @HostBinding('style.left')\n  get left(): string {\n    return this._left + 'px';\n  }\n\n  @HostBinding('class.no-items')\n  get noItems(): boolean {\n    return !Array.isArray(this.items) || this.items.length === 0;\n  }\n\n  get selectedItem(): any {\n    return this.activeIndex >= 0 && this.items[this.activeIndex] !== undefined ? this.items[this.activeIndex] : null;\n  }\n\n  ngOnInit(): void {\n    if (!this.itemTemplate) {\n      this.itemTemplate = this.defaultItemTemplate;\n    }\n  }\n\n  onItemClick(event: MouseEvent, activeIndex: number, item: any) {\n    event.preventDefault();\n    console.log(item);\n    if (item) {\n      this.activeIndex = activeIndex;\n      this.itemSelected.emit(item);\n    }\n  }\n\n  public selectFirstItem() {\n    this.activeIndex = 0;\n    this.resetScroll();\n  }\n\n  public selectPreviousItem() {\n    if (this.activeIndex > 0) {\n      this.activeIndex--;\n    }\n    this.scrollToActiveItem();\n  }\n\n  public selectNextItem() {\n    if (this.activeIndex < this.items.length - 1) {\n      this.activeIndex++;\n      this.scrollToActiveItem();\n    }\n  }\n\n  public selectLastItem() {\n    this.activeIndex = this.items.length > 0 ? this.items.length - 1 : 0;\n    this.scrollToActiveItem();\n  }\n\n  public position() {\n    const element = this.textAreaElement;\n    const coords = getCaretCoordinates(element, element.selectionStart);\n    this._top = coords.top;\n    this._left = coords.left + element.offsetLeft;\n    this.list.nativeElement.scrollTop = 0;\n  }\n\n  public resetScroll() {\n    this.list.nativeElement.scrollTop = 0;\n  }\n\n  public transformItem(item: any) {\n    return this.displayTransform(item) || item;\n  }\n\n  private get adjustTop(): number {\n    let adjust = 0;\n    if (!this.dropUp) {\n      const computedFontSize = getElementStyle(this.textAreaElement, 'fontSize');\n      adjust = parseInt(computedFontSize, 10) + this.textAreaElement.offsetTop;\n    }\n\n    return adjust;\n  }\n\n  private scrollToActiveItem() {\n    const element = this.list.nativeElement as HTMLElement;\n    if (this.activeIndex === 0) {\n      element.scrollTop = 0;\n    } else {\n      const activeElement = element.querySelector('li.active') as HTMLElement;\n      if (activeElement) {\n        element.scrollTop = activeElement.offsetTop;\n      }\n    }\n  }\n}\n","import {Directive, Input} from '@angular/core';\nimport {Tag} from './interfaces';\n\n@Directive({selector: 'highlighted'})\nexport class HighlightedDirective {\n  @Input() tag: Tag;\n}\n","import {\n  AfterViewChecked,\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ComponentFactoryResolver,\n  ContentChild,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  NgZone,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChanges,\n  TemplateRef,\n  ViewChild,\n  ViewContainerRef,\n  ViewEncapsulation\n} from '@angular/core';\nimport {Subject} from 'rxjs';\n\nimport {Line, Mention, Tag} from './util/interfaces';\nimport {Key} from './util/key';\nimport {NgMentionsListComponent} from './util/mentions-list.component';\nimport {\n  applyChangeToValue,\n  escapeRegExp,\n  findStartOfMentionInPlainText,\n  getBoundsOfMentionAtPosition,\n  getCaretPosition, isMobileOrTablet,\n  mapPlainTextIndex,\n  MarkupMention,\n  markupToRegExp,\n  replacePlaceholders,\n  setCaretPosition,\n  styleProperties\n} from './util/utils';\n\n// eslint-disable-next-line no-shadow\nenum InputToKeyboard {\n  'deleteContentBackward' = Key.Backspace,\n  'insertLineBreak' = Key.Enter\n}\n\n/**\n * The Mentions Component\n */\n@Component({\n  exportAs: 'ngMentions',\n  selector: 'ng-mentions',\n  template: `\n      <div #highlighter class=\"highlighter\" [ngClass]=\"textAreaClassNames\" [attr.readonly]=\"readonly\"\n           [ngStyle]=\"highlighterStyle\">\n          <div *ngFor=\"let line of lines\">\n              <ng-container *ngFor=\"let part of line.parts\">\n                  <highlighted *ngIf=\"isPartMention(part)\" [tag]=\"part.tag\">{{formatMention(part)}}</highlighted>\n                  <ng-container *ngIf=\"!isPartMention(part)\">{{part}}</ng-container>\n              </ng-container>\n              <ng-container *ngIf=\"line.parts.length===0\">&nbsp;</ng-container>\n          </div>\n      </div>\n      <textarea\n        #input\n        [rows]=\"rows\"\n        [cols]=\"columns\"\n        [ngModel]=\"displayContent\"\n        [ngClass]=\"textAreaClassNames\"\n        (blur)=\"onBlur($event)\"\n        (select)=\"onSelect($event)\"\n        (mouseup)=\"onSelect($event)\"\n        (ngModelChange)=\"onChange($event)\"\n        (scroll)=\"onTextAreaScroll()\"\n        [disabled]=\"disabled\"\n        [required]=\"required\"\n        [placeholder]=\"placeholder\"\n      ></textarea>\n  `,\n  styleUrls: ['./mentions.scss'],\n  preserveWhitespaces: false,\n  encapsulation: ViewEncapsulation.None\n})\nexport class NgMentionsComponent implements OnChanges, OnInit, AfterViewInit, AfterViewChecked, OnDestroy {\n  /**\n   * The character to trigger the mentions list when a user is typing in the input field\n   */\n  @Input('triggerChar') triggerChar = '@';\n  /**\n   * The markup used to format a mention in the model value\n   */\n  @Input('markup') mentionMarkup = '@[__display__](__type__:__id__)';\n  /**\n   * Optional. When using a custom search (i.e. an API call), the internal searching capability should be disabled.\n   */\n  @Input('disableSearch') disableSearch = false;\n  /**\n   * Only used when internal search is not disabled. This limits the maximum number of items to display in the search\n   * result list.\n   */\n  @Input('maxItems') maxItems = -1;\n  /**\n   * Used to cause the search result list to display in a \"drop up\" fashion, instead of a typical dropdown.\n   */\n  @Input('dropUp') dropUp = false;\n  /**\n   * If the supplied mentions are a list of objects, this is the name of the property used to display\n   * the mention in the search result list and when formatting a mention in the displayed text.\n   */\n  @Input('displayName') displayName = 'display';\n  @Input('placeholder') placeholder: string;\n\n  /**\n   * An event emitted, after the trigger character has been typed, with the user-entered search string.\n   */\n  @Output('search') readonly search: EventEmitter<string> = new EventEmitter<string>();\n  @Output('valueChanges') readonly valueChanges: EventEmitter<string> = new EventEmitter<string>();\n  @Output('stateChanges') readonly stateChanges: Subject<void> = new Subject<void>();\n\n  @ContentChild(TemplateRef, {static: true}) mentionListTemplate: TemplateRef<any>;\n  @ViewChild('input', {static: true}) textAreaInputElement: ElementRef;\n  @ViewChild('highlighter', {static: true}) highlighterElement: ElementRef;\n\n  displayContent = '';\n  lines: Line[] = [];\n  highlighterStyle: {[key: string]: string} = {};\n  textAreaClassNames: {[key: string]: boolean} = {};\n  selectionStart: number;\n  selectionEnd: number;\n  mentions: any[] = [];\n\n  private _value = '';\n  private _required: boolean;\n  private _disabled: boolean;\n  private _rows = 1;\n  private _columns = 20;\n  private searchString: string;\n  private startPos: number;\n  private startNode;\n  mentionsList: NgMentionsListComponent;\n  private stopSearch = false;\n  private markupSearch: MarkupMention;\n  private _destroyed: Subject<void> = new Subject<void>();\n  private newLine = /\\n/g;\n  private _errorState = false;\n  private _inputListener: any;\n  private mobile: boolean = isMobileOrTablet();\n\n  /**\n   * Classes for textarea\n   */\n  @Input('formClass')\n  get formClass(): string {\n    return Object.keys(this.textAreaClassNames).join(' ');\n  }\n\n  set formClass(classNames: string) {\n    this.textAreaClassNames = {};\n    Array.from(classNames.split(' ')).forEach(className => {\n      this.textAreaClassNames[className] = true;\n    });\n  }\n\n  @Input('value')\n  get value(): string {\n    return this._value;\n  }\n\n  set value(value: string) {\n    this.parseLines(value);\n  }\n\n  @Input('required')\n  get required(): boolean {\n    return this._required;\n  }\n\n  set required(value: boolean) {\n    this._required = value;\n    this.refreshStyles();\n  }\n\n  @Input('disabled')\n  get disabled(): boolean {\n    return this._disabled;\n  }\n\n  set disabled(value: boolean) {\n    this._disabled = value;\n    this.refreshStyles();\n  }\n\n  /**\n   * Number of rows for the textarea. Defaults to 1\n   */\n  @Input('rows')\n  get rows(): number|string {\n    return this._rows;\n  }\n\n  set rows(value: number|string) {\n    if (value !== null && typeof value !== 'undefined') {\n      if (typeof value === 'string') {\n        value = parseInt(value, 10);\n      }\n      this._rows = Math.max(1, value);\n      this.refreshStyles();\n    }\n  }\n\n  /**\n   * Number of columns for the textarea. Defaults to 1\n   */\n  @Input('cols')\n  get columns(): number|string {\n    return this._columns;\n  }\n\n  set columns(value: number|string) {\n    if (value !== null && typeof value !== 'undefined') {\n      if (typeof value === 'string') {\n        value = parseInt(value, 10);\n      }\n      this._columns = Math.max(1, value);\n      this.refreshStyles();\n    }\n  }\n\n  /**\n   * The list of mentions to display, or filter, in the search result list.\n   */\n  @Input('mentions')\n  set mentionItems(value: any[]) {\n    this.mentions = value;\n    if (this.disableSearch && this.mentionsList) {\n      this.mentionsList.items = value;\n    }\n  }\n\n  get readonly(): string {\n    return this.disabled ? 'readonly' : null;\n  }\n\n  get errorState(): boolean {\n    return this._errorState;\n  }\n\n  constructor(\n      private element: ElementRef, private componentResolver: ComponentFactoryResolver,\n      private viewContainer: ViewContainerRef, private changeDetector: ChangeDetectorRef, private ngZone: NgZone) {}\n\n  ngOnInit(): void {\n    this.parseMarkup();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if ('markup' in changes) {\n      this.parseMarkup();\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this.addInputListener();\n    this.parseLines(this._value);\n    this.refreshStyles();\n  }\n\n  ngAfterViewChecked(): void {\n    this.addInputListener();\n    this.refreshStyles();\n  }\n\n  ngOnDestroy(): void {\n    if (this._inputListener) {\n      (this.textAreaInputElement.nativeElement as HTMLTextAreaElement).removeEventListener(\n        this.mobile ? 'input' : 'keydown',\n        this._inputListener\n      );\n      this._inputListener = undefined;\n    }\n    this._destroyed.next();\n    this._destroyed.complete();\n  }\n\n  @HostListener('window:resize')\n  public onWindowResize(): void {\n    this.refreshStyles();\n  }\n\n  public onTextAreaScroll(): void {\n    this.highlighterElement.nativeElement.scrollTop = this.textAreaInputElement.nativeElement.scrollTop;\n  }\n\n  public open(): void {\n    const event = {\n      key: this.triggerChar,\n      which: this.triggerChar.charCodeAt(0)\n    };\n    this.textAreaInputElement.nativeElement.focus();\n    const caretPosition: number = getCaretPosition(this.textAreaInputElement.nativeElement);\n    let selectionStart = this.textAreaInputElement.nativeElement.selectionStart;\n    let selectionEnd = this.textAreaInputElement.nativeElement.selectionEnd;\n    if (typeof selectionStart !== 'number' || typeof selectionEnd !== 'number') {\n      selectionStart = caretPosition;\n      selectionEnd = caretPosition;\n    }\n    const newCaretPosition = selectionStart + 1;\n    const newValue = this.displayContent.substring(0, selectionStart) + this.triggerChar + this.displayContent.substring(selectionEnd);\n    this.displayContent = newValue;\n    this.onChange(newValue);\n    setTimeout(\n      () => {\n        this.selectionStart = newCaretPosition;\n        this.selectionEnd = newCaretPosition;\n        setCaretPosition(this.textAreaInputElement.nativeElement, newCaretPosition);\n        setTimeout(() => {\n          this.textAreaInputElement.nativeElement.focus();\n          this.onKeyDown(event);\n        });\n      }\n    );\n  }\n\n  public onSelect(event: any): void {\n    this.selectionStart = event.target.selectionStart;\n    this.selectionEnd = event.target.selectionEnd;\n  }\n\n  public onChange(newPlainTextValue: string): void {\n    const value = this._value;\n    const displayTransform = this.displayTransform.bind(this);\n    let selectionStart = this.textAreaInputElement.nativeElement.selectionStart;\n    let selectionEnd = this.textAreaInputElement.nativeElement.selectionEnd;\n    const bounds = getBoundsOfMentionAtPosition(newPlainTextValue, this.markupSearch, selectionStart, displayTransform);\n    if (bounds.start !== -1) {\n      newPlainTextValue = newPlainTextValue.substring(0, bounds.start) + newPlainTextValue.substring(bounds.end);\n    }\n    const newValue = applyChangeToValue(\n        value, this.markupSearch, newPlainTextValue, this.selectionStart, this.selectionEnd, selectionEnd,\n        displayTransform);\n    const startOfMention = findStartOfMentionInPlainText(value, this.markupSearch, selectionStart, displayTransform);\n    if (startOfMention.start > -1 && this.selectionEnd > startOfMention.start) {\n      selectionStart = startOfMention.start;\n      selectionEnd = selectionStart;\n    }\n    this.selectionStart = Math.max(selectionStart, 0);\n    this.selectionEnd = Math.max(selectionEnd, 0);\n    this.parseLines(newValue);\n    if (this.selectionEnd > 0) {\n      setTimeout(() => setCaretPosition(this.textAreaInputElement.nativeElement, this.selectionEnd));\n    }\n  }\n\n  public onInput(event: InputEvent): void {\n    const character = (event.data || '');\n    const keyCode = InputToKeyboard[event.inputType] || character.charCodeAt(0);\n    if (keyCode === Key.Enter && this.mentionsList.show) {\n      event.preventDefault();\n    }\n    this.handleInput({which: keyCode}, keyCode, character);\n  }\n\n  public onKeyDown(event: any): void {\n    let characterPressed = event.key;\n    const keyCode = event.which || event.keyCode;\n    if (!characterPressed) {\n      const characterCode = event.which || event.keyCode;\n      characterPressed = String.fromCharCode(characterCode);\n      if (!event.shiftKey && (characterCode >= 65 && characterCode <= 90)) {\n        characterPressed = String.fromCharCode(characterCode + 32);\n      }\n    }\n\n    this.handleInput(event, keyCode, characterPressed);\n  }\n\n  public onBlur(event: MouseEvent|KeyboardEvent|FocusEvent): void {\n    if (event instanceof FocusEvent && event.relatedTarget) {\n      const element = event.relatedTarget as HTMLElement;\n      if (element.classList.contains('dropdown-item')) {\n        return;\n      }\n    }\n    this.stopEvent(event);\n    if (this.mentionsList) {\n      this.mentionsList.show = false;\n    }\n  }\n\n  public isPartMention(part: any): boolean {\n    return typeof part.contents !== 'undefined';\n  }\n\n  public formatMention(mention: Mention): string {\n    return this._formatMention(mention.contents);\n  }\n\n  private handleInput(event: any, keyCode: number, characterPressed: string): void {\n    let caretPosition: number = getCaretPosition(this.textAreaInputElement.nativeElement);\n    if (keyCode === Key.Enter && event.wasSelection && caretPosition < this.startPos) {\n      caretPosition = this.startNode.length;\n      setCaretPosition(this.startNode, caretPosition);\n    }\n\n    const startOfMention =\n      findStartOfMentionInPlainText(this._value, this.markupSearch, caretPosition, this.displayTransform.bind(this));\n    if (characterPressed === this.triggerChar) {\n      this.setupMentionsList(caretPosition);\n    } else if (startOfMention.start === -1 && this.startPos >= 0) {\n      if (caretPosition <= this.startPos) {\n        this.mentionsList.show = false;\n        this.startPos = -1;\n      } else if (\n        keyCode !== Key.Shift && !event.metaKey && !event.altKey && !event.ctrlKey &&\n        caretPosition > this.startPos) {\n        this.handleKeyDown(event, caretPosition, characterPressed);\n      }\n    } else {\n      this.onSelect({target: this.textAreaInputElement.nativeElement});\n    }\n  }\n\n  private displayTransform(..._: string[]): string {\n    const replaceIndex = this.markupSearch.groups[this.displayName];\n    return _[replaceIndex];\n  }\n\n  private _formatMention(contents: string): string {\n    const replaceValue = `\\$${this.displayName}`;\n    let result = contents.replace(this.markupSearch.regEx, replaceValue);\n    let replaceIndex;\n    if (result === replaceValue) {\n      replaceIndex = `\\$${this.markupSearch.groups[this.displayName]}`;\n      result = contents.replace(this.markupSearch.regEx, replaceIndex);\n    }\n\n    return result;\n  }\n\n  // noinspection JSMethodCanBeStatic\n  private stopEvent(event: MouseEvent|KeyboardEvent|FocusEvent): void {\n    if (event.preventDefault) {\n      event.preventDefault();\n      event.stopPropagation();\n      event.stopImmediatePropagation();\n    }\n  }\n\n  private setupMentionsList(caretPosition: number): void {\n    this.startPos = caretPosition;\n    this.startNode = window.getSelection().anchorNode;\n    this.searchString = '';\n    this.stopSearch = false;\n    this.showMentionsList();\n    this.updateMentionsList();\n  }\n\n  private handleKeyDown(event: any, caretPosition: number, characterPressed: string): void {\n    const keyCode = event.which || event.keyCode;\n    if (keyCode === Key.Space) {\n      this.startPos = -1;\n    } else if (keyCode === Key.Backspace && caretPosition > 0) {\n      caretPosition--;\n      if (caretPosition === this.startPos) {\n        this.stopSearch = true;\n      }\n      this.mentionsList.show = !this.stopSearch;\n    } else if (this.mentionsList.show) {\n      if (keyCode === Key.Tab || keyCode === Key.Enter) {\n        this.stopEvent(event);\n        this.mentionsList.show = false;\n        let value = this._value;\n        const start =\n            mapPlainTextIndex(value, this.markupSearch, this.startPos, false, this.displayTransform.bind(this));\n        const item = event.item || this.mentionsList.selectedItem;\n        const newValue = replacePlaceholders(item, this.markupSearch);\n        const newDisplayValue = this._formatMention(newValue);\n        caretPosition = this.startPos + newDisplayValue.length;\n        const searchString = this.searchString || '';\n        value = value.substring(0, start) + newValue + value.substring(start + searchString.length + 1, value.length);\n        this.parseLines(value);\n        this.startPos = -1;\n        this.searchString = '';\n        this.stopSearch = true;\n        this.mentionsList.show = false;\n        this.changeDetector.detectChanges();\n        setTimeout(() => {\n          setCaretPosition(this.textAreaInputElement.nativeElement, caretPosition);\n          this.onSelect({target: this.textAreaInputElement.nativeElement});\n        });\n        return;\n      } else if (keyCode === Key.Escape) {\n        this.stopEvent(event);\n        this.mentionsList.show = false;\n        this.stopSearch = true;\n        return;\n      } else if (keyCode === Key.ArrowDown) {\n        this.stopEvent(event);\n        this.mentionsList.selectNextItem();\n        return;\n      } else if (keyCode === Key.ArrowUp) {\n        this.stopEvent(event);\n        this.mentionsList.selectPreviousItem();\n        return;\n      } else if (keyCode === Key.Home) {\n        this.stopEvent(event);\n        this.mentionsList.selectFirstItem();\n        return;\n      } else if (keyCode === Key.End) {\n        this.stopEvent(event);\n        this.mentionsList.selectLastItem();\n        return;\n      }\n    }\n\n    if (keyCode === Key.ArrowLeft || keyCode === Key.ArrowRight || keyCode === Key.Home || keyCode === Key.End) {\n      this.onSelect(event);\n      return;\n    }\n\n    let mention = this.displayContent.substring(this.startPos + 1, caretPosition);\n    if (keyCode !== Key.Backspace) {\n      mention += characterPressed;\n    }\n    this.searchString = mention || '';\n    this.updateMentionsList();\n  }\n\n  private getDisplayValue(item: any): null|string {\n    if (typeof item === 'string') {\n      return item;\n    } else if (item[this.displayName] !== undefined) {\n      return item[this.displayName];\n    }\n\n    return null;\n  }\n\n  private showMentionsList(): void {\n    if (!this.mentionsList) {\n      const componentFactory = this.componentResolver.resolveComponentFactory(NgMentionsListComponent);\n      const componentRef = this.viewContainer.createComponent(componentFactory);\n      this.mentionsList = componentRef.instance;\n      this.mentionsList.itemTemplate = this.mentionListTemplate;\n      this.mentionsList.displayTransform = this.displayTransform.bind(this);\n      this.mentionsList.itemSelected.subscribe(item => {\n        this.textAreaInputElement.nativeElement.focus();\n        const fakeEvent = {which: Key.Enter, wasSelection: true, item};\n        this.onKeyDown(fakeEvent);\n      });\n      this.mentionsList.displayTransform = this.getDisplayValue.bind(this);\n    }\n    this.mentionsList.textAreaElement = this.textAreaInputElement.nativeElement;\n    this.mentionsList.show = true;\n    this.mentionsList.dropUp = this.dropUp;\n    this.mentionsList.activeIndex = 0;\n    this.mentionsList.position();\n    this.ngZone.run(() => this.mentionsList.resetScroll());\n  }\n\n  private updateMentionsList(): void {\n    if (!this.disableSearch) {\n      let items = Array.from(this.mentions);\n      if (this.searchString) {\n        const searchString = this.searchString.toLowerCase(); const searchRegEx = new RegExp(escapeRegExp(searchString), 'i');\n        items = items.filter(item => {\n          const value = this.getDisplayValue(item);\n          return value !== null && searchRegEx.test(value);\n        });\n        if (this.maxItems > 0) {\n          items = items.slice(0, this.maxItems);\n        }\n      }\n\n      this.mentionsList.items = items;\n    } else {\n      this.search.emit(this.searchString);\n    }\n  }\n\n  private parseMarkup(): void {\n    if (this.mentionMarkup.length === 0 || this.mentionMarkup[0] !== this.triggerChar) {\n      throw new Error(`ng-mentions markup pattern must start with the trigger character \"${this.triggerChar}\"`);\n    }\n\n    this.markupSearch = markupToRegExp(this.mentionMarkup);\n  }\n\n  private parseLines(value: string = ''): void {\n    if (value !== this._value) {\n      value = value || '';\n      const lines = value.split(this.newLine).map((line: string) => this.formatMentions(line));\n      const displayContent = lines.map(line => line.content).join('\\n');\n      if (this.displayContent !== displayContent) {\n        this.lines = lines;\n        this.displayContent = displayContent;\n        this.triggerChange(value);\n      }\n    }\n  }\n\n  private formatMentions(line: string): Line {\n    const lineObj: Line = <Line>{originalContent: line, content: line, parts: []};\n\n    if (line.length === 0) {\n      return lineObj;\n    }\n\n    let mention;\n    const tags: Tag[] = [];\n    const regEx = this.markupSearch.regEx;\n    regEx.lastIndex = 0;\n    while ((mention = regEx.exec(line)) !== null) {\n      tags.push({indices: {start: mention.index, end: mention.index + mention[0].length}});\n    }\n\n    const prevTags: Tag[] = [];\n    let content = '';\n    [...tags].sort((tagA, tagB) => tagA.indices.start - tagB.indices.start).forEach((tag: Tag) => {\n      const expectedLength = tag.indices.end - tag.indices.start;\n      const contents = line.slice(tag.indices.start, tag.indices.end);\n      if (contents.length === expectedLength) {\n        const prevIndex = prevTags.length > 0 ? prevTags[prevTags.length - 1].indices.end : 0;\n        const before = line.slice(prevIndex, tag.indices.start);\n        const partMention = <Mention>{contents, tag};\n        lineObj.parts.push(before);\n        lineObj.parts.push(partMention);\n        prevTags.push(tag);\n        content += before + this.formatMention(partMention);\n      }\n    });\n\n    const remainingStart = prevTags.length > 0 ? prevTags[prevTags.length - 1].indices.end : 0;\n    const remaining = line.slice(remainingStart);\n    lineObj.parts.push(remaining);\n    content += remaining;\n    lineObj.content = content;\n\n    return lineObj;\n  }\n\n  private addInputListener(): void {\n    if (!this._inputListener && this.textAreaInputElement) {\n      this._inputListener = this.mobile ? (event: InputEvent) => this.onInput(event) : (event: KeyboardEvent) => this.onKeyDown(event);\n      (this.textAreaInputElement.nativeElement as HTMLElement).addEventListener(\n        this.mobile ? 'input' : 'keydown',\n        this._inputListener\n      );\n    }\n  }\n\n  private refreshStyles(): void {\n    if (!this.textAreaInputElement) {\n      return;\n    }\n    const element = this.textAreaInputElement.nativeElement;\n    const computedStyle: any = getComputedStyle(element);\n    this.highlighterStyle = {};\n    styleProperties.forEach(prop => {\n      this.highlighterStyle[prop] = computedStyle[prop];\n    });\n    this.changeDetector.detectChanges();\n  }\n\n  private triggerChange(value: string): void {\n    this._value = value;\n    this.valueChanges.emit(this._value);\n    this.changeDetector.detectChanges();\n  }\n}\n","import {Directive, ElementRef, forwardRef, HostListener, OnDestroy, OnInit} from '@angular/core';\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\nimport {Subject} from 'rxjs';\nimport {takeUntil} from 'rxjs/operators';\nimport {NgMentionsComponent} from './mentions.component';\n\n/**\n * The NgMentionsAccessorDirective directive is used to indicate the input element.\n */\n@Directive({\n  exportAs: 'ngMentions',\n  selector: 'ng-mentions',\n  providers: [{provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => NgMentionsAccessorDirective), multi: true}]\n})\nexport class NgMentionsAccessorDirective implements OnInit, OnDestroy, ControlValueAccessor {\n  private _onChange: (_: string) => void;\n  private _onTouch: () => void;\n  private _destroyed: Subject<void> = new Subject<void>();\n\n  constructor(private element: ElementRef, private host: NgMentionsComponent) {}\n\n  ngOnInit(): void {\n    this.host.valueChanges.pipe(takeUntil(this._destroyed)).subscribe(value => this.onChange(value));\n  }\n\n  ngOnDestroy(): void {\n    this._destroyed.next();\n    this._destroyed.complete();\n  }\n\n  registerOnChange(fn: any): void {\n    this._onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this._onTouch = fn;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.host.disabled = isDisabled;\n  }\n\n  writeValue(value: string): void {\n    if (typeof value === 'string' || value === null) {\n      this.host.value = value;\n    }\n  }\n\n  @HostListener('change', ['$event'])\n  onChange(value: string) {\n    if (this._onChange && typeof value !== 'object') {\n      this._onChange(value);\n    }\n  }\n\n  @HostListener('touch')\n  onTouched() {\n    if (this._onTouch) {\n      this._onTouch();\n    }\n  }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {FormsModule} from '@angular/forms';\n\nimport {NgHighlighterPatternDirective} from './highlighter-pattern.directive';\nimport {NgHighlighterComponent} from './highlighter.component';\nimport {NgMentionsAccessorDirective} from './mentions-input.directive';\nimport {NgMentionsComponent} from './mentions.component';\nimport {HighlightedDirective} from './util/highlight.directive';\nimport {NgMentionsListComponent} from './util/mentions-list.component';\n\nexport {NgHighlighterComponent} from './highlighter.component';\nexport {NgHighlighterPatternDirective} from './highlighter-pattern.directive';\nexport {NgMentionsAccessorDirective} from './mentions-input.directive';\nexport {NgMentionsComponent} from './mentions.component';\n\nconst EXPORT_DIRECTIVES = [\n  NgMentionsComponent,\n  NgMentionsAccessorDirective,\n  NgHighlighterComponent,\n  NgHighlighterPatternDirective,\n];\nconst DECLARATIONS = [\n  NgMentionsComponent, NgMentionsAccessorDirective, NgMentionsListComponent, HighlightedDirective,\n  NgHighlighterComponent, NgHighlighterPatternDirective\n];\n\n@NgModule({\n    imports: [CommonModule, FormsModule],\n    exports: EXPORT_DIRECTIVES,\n    declarations: DECLARATIONS\n})\nexport class NgMentionsModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}